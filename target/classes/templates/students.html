<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://cdn.jsdelivr.net/vue.resource/1.0.3/vue-resource.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        .el-table .warning-row {
            background: oldlace;
        }

        .el-table .success-row {
            background: #f0f9eb;
        }

        .aaa {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
<div id="students">
    <el-table
            :data="tableData"
            style="width: 100%"
            :row-class-name="tableRowClassName"
            border>
        <el-table-column
                prop="student_id"
                label="号码"
                width="180">
        </el-table-column>
        <el-table-column
                prop="name"
                label="姓名"
                width="180">
        </el-table-column>
        <el-table-column
                prop="sex"
                label="性别">
        </el-table-column>
        <el-table-column
                prop="birth"
                label="生日">
        </el-table-column>
        <el-table-column
                prop="politily"
                label="专业">
        </el-table-column>
    </el-table>
    <el-pagination
            background
            layout="total,prev, pager, next"
            :total="total"
            @current-change="handleCurrentChange"
            class="aaa"
    >
    </el-pagination>
</div>
</body>
<!--<script type="text/javascript" th:inline="javascript">-->
<!--    // var total = [[${total}]];-->
<!--    // var tableData = [[${tableData}]];-->
<!--</script>-->
<script>
    new Vue({
        el: '#students',
        data: {
            total: 1000,
            tableData: []
        },
        created: function () {
            console.log(2)
            let _this = this
            axios.get('/getage?age=1')
                .then(function (response) {
                    console.log(JSON.stringify(response.data))
                    _this.tableData = response.data
                    _this.total = 30
                })
                .catch(function (error) {
                    console.log(error);
                });
        },
        methods: {
            handleCurrentChange(val) {
                console.log(1)
                let _this = this
                axios.get('/getage?age=' + val)
                    .then(function (response) {
                        _this.tableData = response.data
                    })
                    .catch(function (error) {
                        console.log(error);
                    });

            },
            tableRowClassName({row, rowIndex}) {
                if (rowIndex % 2 == 0) {
                    return 'warning-row';
                } else {
                    return 'success-row';
                }
                return '';
            }
        }
    })
</script>
</html>